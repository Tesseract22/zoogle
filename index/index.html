<!DOCTYPE html>

<html>
    <head>
        <title>Zoogle</title>
    </head>
    <body>
        <input id="input"/>
        <div id="table">

        </div>
        <script>
            const input = document.getElementById("input")
            const table = document.getElementById("table")
            let prevRequest = null
            const load = 
            input.oninput = (ev) => {
                console.log("Sending " + input.value)
                if (prevRequest !== null) prevRequest.abort()
                prevRequest = new XMLHttpRequest();
                prevRequest.addEventListener(
                    "load", 
                    (ev) => {
                        table.innerHTML = ""
                        const res = prevRequest.responseText
                        const fs = res.split('\n')
                        for (const f of fs) {
                            const el = document.createElement("div")
                            el.innerHTML = f
                            table.appendChild(el)
                        }
                    }
                )
                prevRequest.open("POST", "search") 
                prevRequest.send(input.value)
            }

        </script>
    </body>
</html>